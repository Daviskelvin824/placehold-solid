import { useEffect, useRef, type JSX } from "react";
import gsap from "gsap";
import { cn } from "~/lib/utils";

export function LogoStaticAnimated({ className }: JSX.IntrinsicElements["svg"]) {
  const svgRef = useRef<SVGSVGElement>(null);
  const timelineRef = useRef<gsap.core.Timeline | null>(null);

  useEffect(() => {
    if (!svgRef.current) return;

    // Clear any existing animations
    if (timelineRef.current) {
      timelineRef.current.kill();
    }

    const svg = svgRef.current;
    const p = svg.querySelector("#p0");
    const lFirst = svg.querySelector("#p1");
    const a = svg.querySelector("#p2");
    const c = svg.querySelector("#p3");
    const e = svg.querySelector("#p4");
    const h = svg.querySelector("#p5");
    const o = svg.querySelector("#p6");
    const lSecond = svg.querySelector("#p7");
    const d = svg.querySelector("#p8");
    const dot = svg.querySelector("#p9");

    const letters = [p, lFirst, a, c, e, h, o, lSecond, d, dot];

    // Create a main timeline
    const tl = gsap.timeline({
      repeat: -1, // -1 means infinite loop
      defaults: {
        ease: "power2.inOut",
        duration: 0.7,
      },
    });

    timelineRef.current = tl;

    // Instead of hiding letters initially, we'll create a continuous animation
    // First, set up the initial state where all letters are visible
    gsap.set(letters, {
      opacity: 1,
      y: 0,
      scale: 1,
      rotation: 0,
    });

    // Gentle floating animation
    letters.forEach((letter, index) => {
      // Create a continuous wave-like motion
      tl.to(letter, {
        y: index % 2 === 0 ? 10 : -10,
        rotation: index % 2 === 0 ? 10 : -10,
        duration: 0.7,
        ease: "sine.inOut",
      });

      tl.to(letter, {
        y: 0,
        rotation: 0,
        duration: 1.2,
        ease: "sine.inOut",
      });
    });

    tl.to(
      letters,
      {
        scale: 0.95,
        duration: 0.8,
        ease: "sine.inOut",
      },
      "+=0.2"
    );

    tl.to(letters, {
      scale: 1,
      duration: 0.8,
      ease: "sine.inOut",
    });

    // Bounce effect
    tl.add("bounce", "+=0.5");

    // Have all letters bounce together
    tl.to(
      letters,
      {
        y: -15,
        duration: 0.6,
        ease: "power2.out",
        stagger: 0.08,
      },
      "bounce"
    );

    tl.to(
      letters,
      {
        y: 0,
        duration: 0.6,
        ease: "bounce.out",
        stagger: 0.08,
      },
      "bounce+=0.6"
    );

    // Slight scale pulse at the end of the animation to transition smoothly back to the beginning
    tl.to(
      letters,
      {
        scale: 0.95,
        duration: 0.8,
        ease: "sine.inOut",
      },
      "+=0.2"
    );

    tl.to(letters, {
      scale: 1,
      duration: 0.8,
      ease: "sine.inOut",
    });

    // Reset colors to original for smooth looping
    tl.to(p, { fill: "#fff", duration: 0.5 }, "-=0.5");
    tl.to(lFirst, { fill: "#fff", duration: 0.5 }, "-=0.5");
    tl.to(a, { fill: "#fff", duration: 0.5 }, "-=0.5");
    tl.to(c, { fill: "#fff", duration: 0.5 }, "-=0.5");
    tl.to(e, { fill: "#fff", duration: 0.5 }, "-=0.5");
    tl.to(h, { fill: "#fff", duration: 0.5 }, "-=0.5");
    tl.to(o, { fill: "#fff", duration: 0.5 }, "-=0.5");
    tl.to(lSecond, { fill: "#fff", duration: 0.5 }, "-=0.5");
    tl.to(d, { fill: "#fff", duration: 0.5 }, "-=0.5");
    tl.to(dot, { fill: "#fff", duration: 0.5 }, "-=0.5");

    return () => {
      if (timelineRef.current) {
        timelineRef.current.kill();
      }
    };
  }, []);

  return (
    <svg
      ref={svgRef}
      className={cn("h-12 aspect-video overflow-visible", className)}
      viewBox="0 0 449.7 84.402"
    >
      <path
        d="M 10.2 84.402 Q 6.3 84.402 4.15 81.352 Q 2 78.302 1.15 73.402 Q 0.3 68.502 0.15 62.902 Q 0 57.302 0 52.302 Q 0 47.902 0.25 42.852 Q 0.5 37.802 1.45 33.252 Q 2.4 28.702 4.7 25.802 Q 7 22.902 11 22.902 Q 14.1 22.902 15.8 24.102 Q 17.5 25.302 18.4 26.902 Q 20.7 25.202 24.1 24.152 Q 27.5 23.102 31.4 23.102 Q 37.9 23.102 43.25 26.302 Q 48.6 29.502 51.8 34.852 Q 55 40.202 55 46.702 Q 55 53.202 51.8 58.602 Q 48.6 64.002 43.25 67.202 Q 37.9 70.402 31.4 70.402 Q 27.4 70.402 24 69.352 Q 20.6 68.302 18.3 66.502 Q 18.3 71.502 17.95 75.602 Q 17.6 79.702 15.9 82.052 Q 14.2 84.402 10.2 84.402 Z M 30.9 53.802 Q 33.5 53.802 35.45 51.852 Q 37.4 49.902 37.4 47.302 Q 37.4 44.702 35.45 42.752 Q 33.5 40.802 30.9 40.802 Q 28.3 40.802 26.35 42.752 Q 24.4 44.702 24.4 47.302 Q 24.4 49.902 26.35 51.852 Q 28.3 53.802 30.9 53.802 Z"
        id="p0"
        stroke="#fff"
        strokeWidth="0.25mm"
        fill="#fff"
      />
      <path
        d="M 71.7 69.902 Q 66.6 69.902 64.1 66.052 Q 61.6 62.202 60.8 54.452 Q 60 46.702 60 35.002 Q 60 27.302 60.25 20.902 Q 60.5 14.502 61.6 9.852 Q 62.7 5.202 65.1 2.652 Q 67.5 0.102 71.8 0.102 Q 76.1 0.102 78.5 2.652 Q 80.9 5.202 82 9.852 Q 83.1 14.502 83.35 20.902 Q 83.6 27.302 83.6 35.002 Q 83.6 52.602 81.15 61.252 Q 78.7 69.902 71.7 69.902 Z"
        id="p1"
        stroke="#fff"
        strokeWidth="0.25mm"
        fill="#fff"
      />
      <path
        d="M 104.6 70.102 Q 99.7 70.102 95.65 68.602 Q 91.6 67.102 89.2 64.052 Q 86.8 61.002 86.8 56.302 Q 86.8 52.302 89.2 49.502 Q 91.6 46.702 95.65 45.202 Q 99.7 43.702 104.6 43.702 Q 107.5 43.702 109.9 44.152 Q 112.3 44.602 113.2 45.202 Q 113.2 42.902 111.3 41.152 Q 109.4 39.402 104.7 39.402 Q 102.5 39.402 101.25 39.752 Q 100 40.102 99 40.602 Q 98 41.102 96.75 41.452 Q 95.5 41.802 93.4 41.802 Q 90.3 41.802 88.45 40.152 Q 86.6 38.502 86.6 35.102 Q 86.6 32.002 88.35 29.752 Q 90.1 27.502 92.9 26.002 Q 95.7 24.502 98.95 23.802 Q 102.2 23.102 105.2 23.102 Q 114.1 23.102 119.7 26.352 Q 125.3 29.602 128 34.802 Q 130.7 40.002 130.7 46.102 Q 130.7 49.502 130.15 52.402 Q 129.6 55.302 128.7 56.902 Q 130.1 58.102 130.85 59.702 Q 131.6 61.302 131.6 63.002 Q 131.6 65.802 129.75 67.952 Q 127.9 70.102 124.5 70.102 Q 121.9 70.102 120.4 69.302 Q 118.9 68.502 117.4 67.202 Q 115 68.602 112.1 69.352 Q 109.2 70.102 104.6 70.102 Z M 106.6 60.002 Q 108.9 60.002 110.05 59.052 Q 111.2 58.102 111.2 56.902 Q 111.2 55.702 110.05 54.752 Q 108.9 53.802 106.6 53.802 Q 104.4 53.802 103.2 54.752 Q 102 55.702 102 56.902 Q 102 58.102 103.2 59.052 Q 104.4 60.002 106.6 60.002 Z"
        id="p2"
        stroke="#fff"
        strokeWidth="0.25mm"
        fill="#fff"
      />
      <path
        d="M 159.1 70.002 Q 152.7 69.902 147.1 66.852 Q 141.5 63.802 138.05 58.402 Q 134.6 53.002 134.6 46.202 Q 134.6 38.902 138.05 33.752 Q 141.5 28.602 147.05 25.852 Q 152.6 23.102 158.8 23.102 Q 165.2 23.102 170 25.552 Q 174.8 28.002 177.45 31.852 Q 180.1 35.702 180.1 39.802 Q 180.1 43.202 178.05 45.152 Q 176 47.102 171.6 47.102 Q 169.2 47.102 167.95 46.152 Q 166.7 45.202 165.85 44.002 Q 165 42.802 163.85 41.852 Q 162.7 40.902 160.5 40.902 Q 157.9 40.902 155.95 42.702 Q 154 44.502 154 47.502 Q 154 50.602 155.9 52.352 Q 157.8 54.102 160.5 54.102 Q 162.6 54.102 163.7 53.452 Q 164.8 52.802 165.65 51.902 Q 166.5 51.002 167.8 50.352 Q 169.1 49.702 171.6 49.702 Q 176 49.702 178.05 52.052 Q 180.1 54.402 180.1 57.002 Q 180.1 60.302 177.5 63.302 Q 174.9 66.302 170.2 68.152 Q 165.5 70.002 159.1 70.002 Z"
        id="p3"
        stroke="#fff"
        strokeWidth="0.25mm"
        fill="#fff"
      />
      <path
        d="M 209.2 70.102 Q 201.7 70.102 196.05 67.152 Q 190.4 64.202 187.25 59.052 Q 184.1 53.902 184.1 47.202 Q 184.1 40.702 187.25 35.202 Q 190.4 29.702 195.95 26.402 Q 201.5 23.102 208.7 23.102 Q 215.4 23.102 220.2 25.802 Q 225 28.502 227.55 32.652 Q 230.1 36.802 230.1 41.402 Q 230.1 46.002 228 48.952 Q 225.9 51.902 222.55 53.452 Q 219.2 55.002 215.4 55.502 Q 211.6 56.002 208.1 55.652 Q 204.6 55.302 202.2 54.502 Q 204 57.402 206.75 58.452 Q 209.5 59.502 212.55 59.352 Q 215.6 59.202 218.1 58.702 Q 221.2 58.002 223.2 59.002 Q 225.2 60.002 225.3 62.202 Q 225.4 64.002 224.05 65.802 Q 222.7 67.602 219.2 68.852 Q 215.7 70.102 209.2 70.102 Z M 202.5 42.302 Q 203.5 43.902 205.4 44.552 Q 207.3 45.202 209.25 45.002 Q 211.2 44.802 212.55 43.902 Q 213.9 43.002 213.9 41.402 Q 213.9 39.702 212.55 38.352 Q 211.2 37.002 208.3 37.002 Q 205.5 37.002 204 38.752 Q 202.5 40.502 202.5 42.302 Z"
        id="p4"
        stroke="#fff"
        strokeWidth="0.25mm"
        fill="#fff"
      />
      <path
        d="M 246.1 70.102 Q 241.1 70.102 238.5 66.202 Q 235.9 62.302 235 54.052 Q 234.1 45.802 234.1 32.702 Q 234.1 22.902 234.65 15.602 Q 235.2 8.302 237.6 4.202 Q 240 0.102 245.3 0.102 Q 249.4 0.102 251.5 2.352 Q 253.6 4.602 254.35 8.252 Q 255.1 11.902 255.2 16.252 Q 255.3 20.602 255.3 24.902 Q 257 24.102 258.55 23.602 Q 260.1 23.102 263.5 23.102 Q 270.6 23.102 275.4 26.602 Q 280.2 30.102 282.7 35.902 Q 285.2 41.702 285.2 48.702 Q 285.2 52.302 284.9 56.002 Q 284.6 59.702 283.6 62.802 Q 282.6 65.902 280.7 67.852 Q 278.8 69.802 275.6 69.802 Q 271.5 69.802 269.55 67.952 Q 267.6 66.102 267.1 62.652 Q 266.6 59.202 266.6 54.602 Q 266.6 49.302 265.45 45.802 Q 264.3 42.302 261 42.302 Q 257.7 42.302 256.45 45.802 Q 255.2 49.302 255.1 54.602 Q 255.1 59.202 254.55 62.702 Q 254 66.202 252.1 68.152 Q 250.2 70.102 246.1 70.102 Z"
        id="p5"
        stroke="#fff"
        strokeWidth="0.25mm"
        fill="#fff"
      />
      <path
        d="M 313.2 70.202 Q 305.8 70.302 300.25 67.152 Q 294.7 64.002 291.55 58.552 Q 288.4 53.102 288.2 46.502 Q 288.1 39.702 291.3 34.452 Q 294.5 29.202 300.2 26.102 Q 305.9 23.002 313.2 23.002 Q 320.4 22.902 325.95 26.002 Q 331.5 29.102 334.8 34.402 Q 338.1 39.702 338.3 46.502 Q 338.4 53.002 335.2 58.352 Q 332 63.702 326.3 66.852 Q 320.6 70.002 313.2 70.202 Z M 313.5 55.602 Q 316.2 55.602 318.2 53.502 Q 320.2 51.402 320.2 48.602 Q 320.2 45.802 318.2 43.752 Q 316.2 41.702 313.5 41.702 Q 310.8 41.702 308.8 43.752 Q 306.8 45.802 306.8 48.602 Q 306.8 51.402 308.8 53.502 Q 310.8 55.602 313.5 55.602 Z"
        id="p6"
        stroke="#fff"
        strokeWidth="0.25mm"
        fill="#fff"
      />
      <path
        d="M 355 69.902 Q 349.9 69.902 347.4 66.052 Q 344.9 62.202 344.1 54.452 Q 343.3 46.702 343.3 35.002 Q 343.3 27.302 343.55 20.902 Q 343.8 14.502 344.9 9.852 Q 346 5.202 348.4 2.652 Q 350.8 0.102 355.1 0.102 Q 359.4 0.102 361.8 2.652 Q 364.2 5.202 365.3 9.852 Q 366.4 14.502 366.65 20.902 Q 366.9 27.302 366.9 35.002 Q 366.9 52.602 364.45 61.252 Q 362 69.902 355 69.902 Z"
        id="p7"
        stroke="#fff"
        strokeWidth="0.25mm"
        fill="#fff"
      />
      <path
        d="M 393.7 70.102 Q 386.3 70.102 380.95 66.602 Q 375.6 63.102 372.75 57.502 Q 369.9 51.902 369.9 45.802 Q 369.9 38.002 373.05 33.002 Q 376.2 28.002 381.1 25.552 Q 386 23.102 391.3 23.102 Q 393.8 23.102 396.4 23.652 Q 399 24.202 401.3 25.502 Q 400.9 21.202 399.55 17.052 Q 398.2 12.902 398.2 8.602 Q 398.2 4.202 400.9 2.102 Q 403.6 0.002 406.7 0.002 Q 410.3 0.002 412.9 2.302 Q 415.5 4.602 417.35 8.402 Q 419.2 12.202 420.3 16.952 Q 421.4 21.702 421.9 26.702 Q 422.4 31.702 422.4 36.302 Q 422.4 37.802 422.25 40.902 Q 422.1 44.002 421.3 47.802 Q 420.5 51.602 418.75 55.502 Q 417 59.402 413.85 62.702 Q 410.7 66.002 405.8 68.052 Q 400.9 70.102 393.7 70.102 Z M 394.3 54.302 Q 397 54.302 399 52.252 Q 401 50.202 401 47.402 Q 401 44.602 399 42.502 Q 397 40.402 394.3 40.402 Q 391.6 40.402 389.55 42.502 Q 387.5 44.602 387.5 47.402 Q 387.5 50.202 389.55 52.252 Q 391.6 54.302 394.3 54.302 Z"
        id="p8"
        stroke="#fff"
        strokeWidth="0.25mm"
        fill="#fff"
      />
      <path
        d="M 439.3 69.602 Q 436.5 69.602 434.15 68.152 Q 431.8 66.702 430.35 64.352 Q 428.9 62.002 428.9 59.202 Q 428.9 56.402 430.35 54.002 Q 431.8 51.602 434.15 50.202 Q 436.5 48.802 439.3 48.802 Q 442.1 48.802 444.5 50.202 Q 446.9 51.602 448.3 54.002 Q 449.7 56.402 449.7 59.202 Q 449.7 62.002 448.3 64.352 Q 446.9 66.702 444.5 68.152 Q 442.1 69.602 439.3 69.602 Z"
        id="p9"
        stroke="#fff"
        strokeWidth="0.25mm"
        fill="#fff"
      />
    </svg>
  );
}
